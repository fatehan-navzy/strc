syntax = "proto3";

package com.navzy.services;

option go_package = "github.com/fatehan-navzy/strc/services";

import "services/repo.proto";
import "devices/devices.proto";
import "packets/packets.proto";

option java_package = "com.fatehan.navzy.services";
option java_multiple_files = true;

service NavzyService {
  rpc PacketIndex(PacketRequest) returns (PacketResponse);
  rpc DeviceCreate(com.navzy.devices.Device) returns (com.navzy.devices.Device);
  rpc DeviceStatusIndex(DeviceStatusRequest) returns (DeviceStatusResponse);
}

message DeviceStatusRequest {
  repeated string static_keys = 1;
}

message DeviceStatusResponse {
  uint32 cost = 1;
  uint32 records = 2;
  repeated DeviceStatus list = 3;
}

message PacketRequest {
  TimeRange timestamp = 1;
  repeated string static_key = 2;
}

message PacketResponse {
  repeated com.navzy.packets.Packet packets = 1;
}