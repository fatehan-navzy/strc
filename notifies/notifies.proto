syntax = "proto3";

package com.navzy.notifies;

option go_package = "github.com/fatehan-navzy/strc/notifies";

import "packets/packets.proto";
import "google/protobuf/timestamp.proto";

option java_package = "com.fatehan.navzy.notifies";
option java_multiple_files = true;

message Notify {
  enum Status {
    PENDING = 0;
    SENT = 1;
    FAILED = 2;
  }
  string device_id = 1;
  google.protobuf.Timestamp created_at = 2;
  string title = 3;
  com.navzy.packets.Packet packet = 4;
  Handler Handler = 6;
}

message NotifySetting {
  enum Status {
    ACTIVE = 0;
    INACTIVE = 1; 
  }

  uint64 id = 1;
  string dynamic_key = 2;
  Status status = 3;
  optional string message = 5;
  Handler Handler = 6;
  google.protobuf.Timestamp created_at = 7;
  google.protobuf.Timestamp updated_at = 8;
}

message Handler {
  repeated string logs = 1;
  
  reserved 2 to 20;

  oneof via {
    ViaFcm fcm = 21;
  }

  reserved 30 to 50;

  oneof handler {
    AreaHandler area = 51;
    IgnitionHandler ignition = 52;
    SpeedHandler speed = 53;
    CustomHandler custom = 54;
  }
}

message CustomHandler {
  repeated string ios = 1;
  string formula = 2;
  bool continues = 3;
}

message SpeedHandler {
  uint32 speed = 1;
}

message IgnitionHandler {
  bool status = 1;
}

message AreaHandler {
  uint64 area_id = 1;
  bool status = 2;
}

message ViaFcm {

}